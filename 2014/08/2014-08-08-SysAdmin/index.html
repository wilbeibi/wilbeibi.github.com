<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Just some examples, no big deal. Tested on Ubuntu 14.04."><meta name="keywords" content="Sysadmin"><meta name="author" content="wilbeibi"><meta name="copyright" content="wilbeibi"><title>A Primer to System Administration - Users and groups | Gradient Ascent</title><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.1"><link rel="stylesheet" href="/css/custom.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"N3W10X795S","apiKey":"ed0a732eec07d11478a1d5c38c6a82b4","indexName":"wilbeibi_blog","hits":{"per_page":10},"languages":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}.","hits_stats":"${hits} results found in ${time} ms"}},
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '8.0.0'
} </script><meta name="generator" content="Hexo 8.0.0"><link rel="alternate" href="/atom.xml" title="Gradient Ascent" type="application/atom+xml">
</head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-create-a-user"><span class="toc-number">1.</span> <span class="toc-text">How to create a user</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-create-a-group"><span class="toc-number">2.</span> <span class="toc-text">How to create a group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-add-a-user-to-a-group"><span class="toc-number">3.</span> <span class="toc-text">How to add a user to a group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-list-all-users-in-a-group"><span class="toc-number">4.</span> <span class="toc-text">How to list all users in a group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-sticky-bit"><span class="toc-number">5.</span> <span class="toc-text">What is sticky bit</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#What-is-sticky-bit-looks-like"><span class="toc-number">5.1.</span> <span class="toc-text">What is sticky bit looks like</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-set-it"><span class="toc-number">5.2.</span> <span class="toc-text">How to set it</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-setuid"><span class="toc-number">6.</span> <span class="toc-text">What is setuid</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-set-it-1"><span class="toc-number">6.1.</span> <span class="toc-text">How to set it</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#And-it-is-dangerous"><span class="toc-number">6.2.</span> <span class="toc-text">And it is dangerous</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BTW"><span class="toc-number">7.</span> <span class="toc-text">BTW</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">wilbeibi</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">22</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">9</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">1</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/images/curve.webp)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Gradient Ascent</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a></span></div><div id="post-info"><div id="post-title">A Primer to System Administration - Users and groups</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2014-08-08</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="How-to-create-a-user"><a href="#How-to-create-a-user" class="headerlink" title="How to create a user"></a>How to create a user</h2><p>By useradd:</p>
<pre><code>useradd -m -d &lt;HomeDir&gt; -g &lt;Group&gt; username
 	
</code></pre>
<p>It’s optional to specify the new user’s home directory and group, but I strongly suggest to do so. <code>-m</code> stands for create home, <code>-d</code> to allocate a directory. (Warning, don’t mess up <code>useradd</code> and <code>adduser</code>, the later one is a higher level’s implementation. Here is a <a href="http://askubuntu.com/questions/345974/what-is-the-difference-between-adduser-and-useradd">detailed explanation of these two’s differences</a>.)</p>
<h2 id="How-to-create-a-group"><a href="#How-to-create-a-group" class="headerlink" title="How to create a group"></a>How to create a group</h2><p>By groupadd:</p>
<pre><code>groupadd groupname
</code></pre>
<h2 id="How-to-add-a-user-to-a-group"><a href="#How-to-add-a-user-to-a-group" class="headerlink" title="How to add a user to a group"></a>How to add a user to a group</h2><p>By usermod:<br>    usermod -a -G <groupname> username</p>
<p>where <code>usermod</code> means modify a user account, <code>-a</code> stands for append, append this user to a group.</p>
<p><a href="http://www.cyberciti.biz/faq/howto-linux-add-user-to-group/">Read more</a></p>
<h2 id="How-to-list-all-users-in-a-group"><a href="#How-to-list-all-users-in-a-group" class="headerlink" title="How to list all users in a group"></a>How to list all users in a group</h2><p>Well, there is not such a built-in command for that, but we can use:<br>	<br>	grep ‘^groupname’ &#x2F;etc&#x2F;group<br>	<br>or <code>apt-get install members</code>, then</p>
<pre><code>members groupname
</code></pre>
<h2 id="What-is-sticky-bit"><a href="#What-is-sticky-bit" class="headerlink" title="What is sticky bit"></a>What is sticky bit</h2><h3 id="What-is-sticky-bit-looks-like"><a href="#What-is-sticky-bit-looks-like" class="headerlink" title="What is sticky bit looks like"></a>What is sticky bit looks like</h3><p>Sticky bit is used for directories. As wikipedia said:</p>
<blockquote>
<p>When the sticky bit is set, only the item’s owner, the directory’s owner, or root can rename or delete files. Without the sticky bit set, any user with write and execute permissions for the directory can rename or delete contained files, regardless of owner.</p>
</blockquote>
<p>For example, if the professor create a &#x2F;homework directory with sticky bit, every student can upload their homework, but they cannot rename or delete other students’ homework.</p>
<h3 id="How-to-set-it"><a href="#How-to-set-it" class="headerlink" title="How to set it"></a>How to set it</h3><pre><code> chmod +t /path/to/directory
</code></pre>
<p>or</p>
<pre><code> chmod 1755
</code></pre>
<p>where 1 stands for sticky bit, 7 for owner has all privilege, 5 for read and execute privilege for the group, and for others.</p>
<p>Now, &#x2F;path&#x2F;to&#x2F;directory should looks like this (replaced last character):</p>
<pre><code>drwxr-xr-t   1 root     other          0 Nov 10 12:57 test
</code></pre>
<p>As wikipedia said, if the sticky-bit is set on the directory without the execution bit set for the others category, it is indicated with a capital T:</p>
<pre><code>drwxr-xr-T   1 root     other          0 Nov 10 12:57 test
 
</code></pre>
<p><a href="http://www.linuxnix.com/2012/01/sticky-bit-set-linux.html">Read more …</a></p>
<h2 id="What-is-setuid"><a href="#What-is-setuid" class="headerlink" title="What is setuid"></a>What is setuid</h2><p>One sentence explanation: Regardless of who runs this program, run it as the user who owns it, not the user that executes it.</p>
<h3 id="How-to-set-it-1"><a href="#How-to-set-it-1" class="headerlink" title="How to set it"></a>How to set it</h3><pre><code>chmod u+s /path/to/file
</code></pre>
<h3 id="And-it-is-dangerous"><a href="#And-it-is-dangerous" class="headerlink" title="And it is dangerous"></a>And it is dangerous</h3><p>For instance, a simple shell script <code>showfile.sh</code> has set setuid as root privilege:</p>
<pre><code> #!/bin/sh
 # showfile
 ls -l | sort
</code></pre>
<p>And If I am a bad guy, I could easily write script :</p>
<pre><code> rm -rf /some/where/important
</code></pre>
<p>and saved as name <code>ls</code>, add my <code>ls</code> to the front of $PATH. Now when I tried to run showfile.sh, Boom ! The files are deleted.</p>
<h2 id="BTW"><a href="#BTW" class="headerlink" title="BTW"></a>BTW</h2><p>If you found grammar errors or typos, please feel free to help me <a href="https://github.com/Wilbeibi/wilbeibi_blog_src/edit/master/source/_posts/2014-08-08-SysAdmin.md">correct it</a>.</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">wilbeibi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://wilbeibi.com/2014/08/2014-08-08-SysAdmin/">http://wilbeibi.com/2014/08/2014-08-08-SysAdmin/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Sysadmin/">Sysadmin</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2014/08/2014-08-10-SysAdmin2/"><i class="fa fa-chevron-left">  </i><span>A Primer to System Administration - Know Thy System</span></a></div><div class="next-post pull-right"><a href="/2014/07/2014-7-21-gitAtoZ/"><span>How to deal with Git A-Z?</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(/images/curve.webp)"><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2025 By wilbeibi</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/lib/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.1"></script><script src="/js/fancybox.js?version=1.9.1"></script><script src="/js/sidebar.js?version=1.9.1"></script><script src="/js/copy.js?version=1.9.1"></script><script src="/js/fireworks.js?version=1.9.1"></script><script src="/js/transition.js?version=1.9.1"></script><script src="/js/scroll.js?version=1.9.1"></script><script src="/js/head.js?version=1.9.1"></script><script src="/js/search/algolia.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>